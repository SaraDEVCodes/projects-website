---
import MainLayout from "../../layouts/MainLayout.astro";
export const prerender = false;
import { getEntry } from "astro:content";
import { formatDate } from "../../utils";
import Tags from "../../components/Tags.astro";

const { slug } = Astro.params;

if (slug === undefined) {
    throw new Error("Slug is required");
}

const entry = await getEntry("project", slug);

if (entry === undefined) {
    return Astro.redirect("/404");
}

const { Content } = await entry.render();
---

<MainLayout>
    <div class="flex flex-col items-start">
        <a
            href="/projects"
            class="bg-red-500 hover:bg-red-800 text-white font-semibold text-base uppercase tracking-wide py-2 px-4 mb-10 rounded-full shadow-md transition duration-200"
        >
            Back To All Projects
        </a>

        <article>
            <h1 class="text-4xl font-bold mb-2">{entry.data.title}</h1>
            <h3 class="text-lg mb-2">
                {entry.data.author} Published {formatDate(entry.data.pubDate)}
            </h3>

            <Tags tags={entry.data.tags} />

            <img
                src={"/images/" + entry.data.image}
                alt="Article Image"
                class="w-full h-auto rounded-xl my-6"
            />
            <div class="article-content">
                <Content />
            </div>
        </article>
    </div>
</MainLayout>

<style is:global>
    p {
        margin: 20px 0;
    }

    h2 {
        margin: 20px 0;
        font-size: 1.8rem;
    }

    .article-content {
    }
    .article-content ul {
        list-style: disc;
        padding-left: 40px;
    }
    .article-content ul li {
        margin: 10px 0;
    }
</style>
